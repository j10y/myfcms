var ProviderSelector={getView:function(h,f){var g=null;if(f){var g=new Ext.grid.CheckboxSelectionModel({singleSelect:true});}else{g=new Ext.grid.CheckboxSelectionModel();}var b=new Ext.grid.ColumnModel({columns:[g,new Ext.grid.RowNumberer(),{header:"providerId",dataIndex:"providerId",hidden:true},{header:"等级",dataIndex:"rank",width:40,renderer:function(i){if(i=="1"){return'<img title="一级供应商" src="'+__ctxPath+'/images/flag/customer/grade_one.png"/>';}else{if(i=="2"){return'<img title="二级供应商" src="'+__ctxPath+'/images/flag/customer/grade_two.png"/>';}else{if(i=="3"){return'<img title="三级供应商" src="'+__ctxPath+'/images/flag/customer/grade_three.png"/>';}else{return'<img title="四级供应商" src="'+__ctxPath+'/images/flag/customer/grade_four.png"/>';}}}}},{header:"供应商名字",dataIndex:"providerName",width:120},{header:"联系人",dataIndex:"contactor",width:80},{header:"电话",dataIndex:"phone",width:80},{header:"地址",dataIndex:"address",width:150},{header:"管理",dataIndex:"providerId",width:100,sortable:false,renderer:function(l,k,i,o,j){var n=i.data.providerId;var m='<button title="删除" value=" " class="btn-del" onclick="ProviderView.remove('+n+')">&nbsp;&nbsp;</button>';m+='&nbsp;<button title="编辑" value=" " class="btn-edit" onclick="ProviderView.edit('+n+')">&nbsp;&nbsp;</button>';return m;}}],defaults:{sortable:true,menuDisabled:false,width:100}});var c=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:__ctxPath+"/customer/listProvider.do"}),reader:new Ext.data.JsonReader({root:"result",totalProperty:"totalCounts",id:"id",fields:[{name:"providerId",type:"int"},"rank","providerName","contactor","phone","address"]}),remoteSort:true});var d=new Ext.grid.GridPanel({id:"ProviderSelectorGrid",width:550,height:300,region:"center",title:"供应商列表",store:c,shim:true,trackMouseOver:true,disableSelection:false,loadMask:true,cm:b,sm:g,viewConfig:{forceFit:true,enableRowBody:false,showPreview:false},bbar:new Ext.PagingToolbar({pageSize:25,store:c,displayInfo:true,displayMsg:"当前显示从{0}至{1}， 共{2}条记录",emptyMsg:"当前没有记录"})});c.load({params:{start:0,limit:25}});var a=new Ext.FormPanel({width:550,region:"north",id:"ProviderForm",height:40,frame:false,border:false,layout:"hbox",layoutConfig:{padding:"5",align:"middle"},defaults:{xtype:"label",margins:{top:0,right:4,bottom:4,left:4}},items:[{text:"查询条件:"},{text:"名称"},{xtype:"textfield",name:"Q_providerName_S_LK",width:80},{text:"联系人"},{xtype:"textfield",name:"Q_contactor_S_LK",width:80},{text:"等级"},{hiddenName:"Q_rank_N_EQ",width:100,xtype:"combo",mode:"local",editable:false,triggerAction:"all",store:[["null","　"],["1","一级供应商"],["2","二级供应商"],["3","三级供应商"],["4","四级供应商"]]},{xtype:"button",text:"查询",iconCls:"search",handler:function(){var i=Ext.getCmp("ProviderForm");var j=Ext.getCmp("ProviderSelectorGrid");if(i.getForm().isValid()){i.getForm().submit({waitMsg:"正在提交查询",url:__ctxPath+"/customer/listProvider.do",success:function(l,m){var k=Ext.util.JSON.decode(m.response.responseText);j.getStore().loadData(k);}});}}}]});var e=new Ext.Window({title:"供应商选择器",iconCls:"menu-provider",width:580,height:380,layout:"border",border:false,items:[a,d],modal:true,buttonAlign:"center",buttons:[{iconCls:"btn-ok",text:"确定",handler:function(){var l=Ext.getCmp("ProviderSelectorGrid");var n=l.getSelectionModel().getSelections();var j="";var m="";for(var k=0;k<n.length;k++){if(k>0){j+=",";m+=",";}j+=n[k].data.providerId;m+=n[k].data.providerName;}if(h!=null){h.call(this,j,m);}e.close();}},{text:"取消",iconCls:"btn-cancel",handler:function(){e.close();}}]});return e;}};