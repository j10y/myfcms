var FCKStyles=FCK.Styles={_Callbacks:{},_ObjectStyles:{},ApplyStyle:function(a){if(typeof a=="string"){a=this.GetStyles()[a];}if(a){if(a.GetType()==FCK_STYLE_OBJECT){a.ApplyToObject(FCKSelection.GetSelectedElement());}else{a.ApplyToSelection(FCK.EditorWindow);}FCK.Events.FireEvent("OnSelectionChange");}},RemoveStyle:function(a){if(typeof a=="string"){a=this.GetStyles()[a];}if(a){a.RemoveFromSelection(FCK.EditorWindow);FCK.Events.FireEvent("OnSelectionChange");}},AttachStyleStateChange:function(a,d,c){var b=this._Callbacks[a];if(!b){b=this._Callbacks[a]=[];}b.push([d,c]);},CheckSelectionChanges:function(){var g=FCKSelection.GetBoundaryParentElement(true);if(!g){return;}var k=new FCKElementPath(g);var j=this.GetStyles();for(var d in j){var f=this._Callbacks[d];if(f){var b=j[d];var a=b.CheckActive(k);if(a!=(b._LastState||null)){b._LastState=a;for(var e=0;e<f.length;e++){var h=f[e][0];var c=f[e][1];h.call(c||window,d,a);}}}}},CheckStyleInSelection:function(a){return false;},_GetRemoveFormatTagsRegex:function(){var a=new RegExp("^(?:"+FCKConfig.RemoveFormatTags.replace(/,/g,"|")+")$","i");return(this._GetRemoveFormatTagsRegex=function(){return a;})&&a;},RemoveAll:function(){var g=new FCKDomRange(FCK.EditorWindow);g.MoveToSelection();if(g.CheckIsCollapsed()){return;}g.Expand("inline_elements");var k=g.CreateBookmark(true);var c=g.GetBookmarkNode(k,true);var h=g.GetBookmarkNode(k,false);g.Release(true);var j=this._GetRemoveFormatTagsRegex();var l=new FCKElementPath(c);var e=l.Elements;var b;for(var f=1;f<e.length;f++){b=e[f];if(b==l.Block||b==l.BlockLimit){break;}if(j.test(b.nodeName)){FCKDomTools.BreakParent(c,b,g);}}l=new FCKElementPath(h);e=l.Elements;for(var f=1;f<e.length;f++){b=e[f];if(b==l.Block||b==l.BlockLimit){break;}elementName=b.nodeName.toLowerCase();if(j.test(b.nodeName)){FCKDomTools.BreakParent(h,b,g);}}var a=FCKDomTools.GetNextSourceNode(c,true,1);while(a){if(a==h){break;}var d=FCKDomTools.GetNextSourceNode(a,false,1);if(j.test(a.nodeName)){FCKDomTools.RemoveNode(a,true);}else{FCKDomTools.RemoveAttributes(a,FCKConfig.RemoveAttributesArray);}a=d;}g.SelectBookmark(k);FCK.Events.FireEvent("OnSelectionChange");},GetStyle:function(a){return this.GetStyles()[a];},GetStyles:function(){var a=this._GetStyles;if(!a){a=this._GetStyles=FCKTools.Merge(this._LoadStylesCore(),this._LoadStylesCustom(),this._LoadStylesXml());}return a;},CheckHasObjectStyle:function(a){return !!this._ObjectStyles[a];},_LoadStylesCore:function(){var d={};var a=FCKConfig.CoreStyles;for(var b in a){var c=d["_FCK_"+b]=new FCKStyle(a[b]);c.IsCore=true;}return d;},_LoadStylesCustom:function(){var d={};var a=FCKConfig.CustomStyles;if(a){for(var b in a){var c=d[b]=new FCKStyle(a[b]);c.Name=b;}}return d;},_LoadStylesXml:function(){var m={};var f=FCKConfig.StylesXmlPath;if(!f||f.length==0){return m;}var e=new FCKXml();e.LoadUrl(f);var q=FCKXml.TransformToObject(e.SelectSingleNode("Styles"));var o=q.$Style;if(!o){return m;}for(var u=0;u<o.length;u++){var w=o[u];var b=(w.element||"").toLowerCase();if(b.length==0){throw ('The element name is required. Error loading "'+f+'"');}var h={Element:b,Attributes:{},Styles:{},Overrides:[]};var c=w.$Attribute||[];for(var t=0;t<c.length;t++){h.Attributes[c[t].name]=c[t].value;}var s=w.$Style||[];for(t=0;t<s.length;t++){h.Styles[s[t].name]=s[t].value;}var l=w.$Override;if(l){for(t=0;t<l.length;t++){var g=l[t];var p={Element:g.element};var a=g.$Attribute;if(a){p.Attributes={};for(var r=0;r<a.length;r++){var d=a[r].value||null;if(d){var n=d&&FCKRegexLib.RegExp.exec(d);if(n){d=new RegExp(n[1],n[2]||"");}}p.Attributes[a[r].name]=d;}}h.Overrides.push(p);}}var v=new FCKStyle(h);v.Name=w.name||b;if(v.GetType()==FCK_STYLE_OBJECT){this._ObjectStyles[b]=true;}m[v.Name]=v;}return m;}};