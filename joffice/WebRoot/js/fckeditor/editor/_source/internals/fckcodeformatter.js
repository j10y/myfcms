var FCKCodeFormatter=new Object();FCKCodeFormatter.Init=function(){var a=this.Regex=new Object();a.BlocksOpener=/\<(P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DL|DT|DD|TITLE|META|LINK|BASE|SCRIPT|LINK|TD|TH|AREA|OPTION)[^\>]*\>/gi;a.BlocksCloser=/\<\/(P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DL|DT|DD|TITLE|META|LINK|BASE|SCRIPT|LINK|TD|TH|AREA|OPTION)[^\>]*\>/gi;a.NewLineTags=/\<(BR|HR)[^\>]*\>/gi;a.MainTags=/\<\/?(HTML|HEAD|BODY|FORM|TABLE|TBODY|THEAD|TR)[^\>]*\>/gi;a.LineSplitter=/\s*\n+\s*/g;a.IncreaseIndent=/^\<(HTML|HEAD|BODY|FORM|TABLE|TBODY|THEAD|TR|UL|OL|DL)[ \/\>]/i;a.DecreaseIndent=/^\<\/(HTML|HEAD|BODY|FORM|TABLE|TBODY|THEAD|TR|UL|OL|DL)[ \>]/i;a.FormatIndentatorRemove=new RegExp("^"+FCKConfig.FormatIndentator);a.ProtectedTags=/(<PRE[^>]*>)([\s\S]*?)(<\/PRE>)/gi;};FCKCodeFormatter._ProtectData=function(a,b,c,d){return b+"___FCKpd___"+(FCKCodeFormatter.ProtectedData.push(c)-1)+d;};FCKCodeFormatter.Format=function(f){if(!this.Regex){this.Init();}FCKCodeFormatter.ProtectedData=new Array();var d=f.replace(this.Regex.ProtectedTags,FCKCodeFormatter._ProtectData);d=d.replace(this.Regex.BlocksOpener,"\n$&");d=d.replace(this.Regex.BlocksCloser,"$&\n");d=d.replace(this.Regex.NewLineTags,"$&\n");d=d.replace(this.Regex.MainTags,"\n$&\n");var h="";var c=d.split(this.Regex.LineSplitter);d="";for(var e=0;e<c.length;e++){var g=c[e];if(g.length==0){continue;}if(this.Regex.DecreaseIndent.test(g)){h=h.replace(this.Regex.FormatIndentatorRemove,"");}d+=h+g+"\n";if(this.Regex.IncreaseIndent.test(g)){h+=FCKConfig.FormatIndentator;}}for(var b=0;b<FCKCodeFormatter.ProtectedData.length;b++){var a=new RegExp("___FCKpd___"+b);d=d.replace(a,FCKCodeFormatter.ProtectedData[b].replace(/\$/g,"$$$$"));}return d.Trim();};