var HolidayRecordForm=function(b){this.recordId=b;var a=this.setup();var c=new Ext.Window({id:"HolidayRecordFormWin",title:"假期设置详细信息",iconCls:"menu-holidayRecord",width:390,height:270,modal:true,layout:"fit",buttonAlign:"center",items:[this.setup()],buttons:[{text:"保存",iconCls:"btn-save",handler:function(){var d=Ext.getCmp("HolidayRecordForm");if(d.getForm().isValid()){d.getForm().submit({method:"post",waitMsg:"正在提交数据...",success:function(e,f){Ext.ux.Toast.msg("操作信息","成功保存信息！");Ext.getCmp("HolidayRecordGrid").getStore().reload();c.close();},failure:function(e,f){Ext.MessageBox.show({title:"操作信息",msg:"信息保存出错，请联系管理员！",buttons:Ext.MessageBox.OK,icon:"ext-mb-error"});c.close();}});}}},{text:"取消",iconCls:"btn-cancel",handler:function(){c.close();}}]});c.show();};HolidayRecordForm.prototype.setup=function(){var a=new Ext.FormPanel({url:__ctxPath+"/personal/saveHolidayRecord.do",layout:"form",id:"HolidayRecordForm",bodyStyle:"padding:5px;",border:false,defaults:{width:400,anchor:"98%,98%"},formId:"HolidayRecordFormId",defaultType:"textfield",items:[{name:"holidayRecord.recordId",id:"recordId",xtype:"hidden",value:this.recordId==null?"":this.recordId},{fieldLabel:"开始日期",name:"holidayRecord.startTime",xtype:"datefield",format:"Y-m-d",id:"startTime"},{fieldLabel:"结束日期",xtype:"datefield",name:"holidayRecord.endTime",id:"endTime",format:"Y-m-d"},{fieldLabel:"描述",xtype:"textarea",name:"holidayRecord.descp",id:"descp"},{xtype:"container",layout:"column",defaultType:"textfield",height:26,items:[{xtype:"label",text:"所属用户:",width:105},{name:"holidayRecord.fullname",id:"fullname"},{xtype:"hidden",name:"holidayRecord.userId",id:"userId"},{xtype:"button",text:"选择",id:"userSelect",iconCls:"btn-select",width:60,handler:function(){UserSelector.getView(function(d,e){var b=Ext.getCmp("fullname");var c=Ext.getCmp("userId");b.setValue(e);c.setValue(d);},true).show();}}]},{fieldLabel:"全公司假期",name:"holidayRecord.isAll",id:"isAll",xtype:"checkbox",inputValue:"0",listeners:{check:function(d,f){var b=Ext.getCmp("fullname");var e=Ext.getCmp("userId");var c=Ext.getCmp("userSelect");if(f){b.setValue("");b.setDisabled(true);c.setDisabled(true);e.setValue("");}else{b.setDisabled(false);c.setDisabled(false);}}}}]});if(this.recordId!=null&&this.recordId!="undefined"){a.getForm().load({deferredRender:false,url:__ctxPath+"/personal/getHolidayRecord.do?recordId="+this.recordId,waitMsg:"正在载入数据...",success:function(e,f){var b=f.result.data;var d=getDateFromFormat(b.startTime,"yyyy-MM-dd HH:mm:ss");var c=getDateFromFormat(b.endTime,"yyyy-MM-dd HH:mm:ss");Ext.getCmp("startTime").setValue(new Date(d));Ext.getCmp("endTime").setValue(new Date(c));if(b.isAll==1){Ext.getCmp("isAll").setValue(true);}},failure:function(b,c){}});}return a;};