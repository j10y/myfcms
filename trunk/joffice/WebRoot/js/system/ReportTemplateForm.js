var ReportTemplateForm=function(b){this.reportId=b;var a=this.setup();var c=new Ext.Window({id:"ReportTemplateFormWin",title:"报表详细信息",width:600,autoHeight:true,modal:true,layout:"anchor",plain:true,bodyStyle:"padding:5px;",buttonAlign:"center",items:[this.setup()],buttons:[{text:"保存",iconCls:"btn-save",handler:function(){var d=Ext.getCmp("ReportTemplateForm");if(d.getForm().isValid()){d.getForm().submit({method:"post",waitMsg:"正在提交数据...",success:function(e,f){Ext.ux.Toast.msg("操作信息","成功保存信息！");Ext.getCmp("ReportTemplateGrid").getStore().reload();c.close();},failure:function(e,f){Ext.MessageBox.show({title:"操作信息",msg:"信息保存出错，请联系管理员！",buttons:Ext.MessageBox.OK,icon:"ext-mb-error"});c.close();}});}}},{text:"取消",iconCls:"btn-cancel",handler:function(){c.close();}}]});c.show();};ReportTemplateForm.prototype.setup=function(){function b(d){var e;for(var c=0;c<d.length;c++){e=d[c].filepath;Ext.getCmp("reportLocation").setValue(e);}}var a=new Ext.FormPanel({url:__ctxPath+"/system/saveReportTemplate.do",layout:"form",id:"ReportTemplateForm",frame:true,defaults:{widht:400,anchor:"100%,100%"},formId:"ReportTemplateFormId",defaultType:"textfield",items:[{name:"reportTemplate.reportId",id:"reportId",xtype:"hidden",value:this.reportId==null?"":this.reportId},{name:"reportTemplate.createtime",id:"createtime",xtype:"hidden"},{fieldLabel:"报表标题",name:"reportTemplate.title",id:"title",allowBlank:false,blankText:"报表标题不能为空"},{fieldLabel:"报表描述",name:"reportTemplate.descp",id:"descp",xtype:"htmleditor",height:200,allowBlank:false,blankText:"报表描述不能为空"},{xtype:"container",height:26,layout:"column",defaultType:"textfield",items:[{xtype:"label",style:"padding-left:0px;margin-left:0px;margin-bottom:2px;",text:"报表模块路径",width:102},{columnWidth:0.8,name:"reportTemplate.reportLocation",id:"reportLocation",allowBlank:false,blankText:"报表模块jasper文件路径不能为空"},{xtype:"button",text:"上传附件",columnWidth:0.2,handler:function(){var c=App.createUploadDialog({file_cat:"system",callback:b});c.show("queryBtn");}}]}]});if(this.reportId!=null&&this.reportId!="undefined"){a.getForm().load({deferredRender:false,url:__ctxPath+"/system/getReportTemplate.do?reportId="+this.reportId,waitMsg:"正在载入数据...",success:function(c,d){},failure:function(c,d){Ext.ux.Toast.msg("编辑","载入失败");}});}return a;};