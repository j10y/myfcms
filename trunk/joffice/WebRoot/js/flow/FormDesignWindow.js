FormDesignWindow=Ext.extend(Ext.Window,{constructor:function(b){Ext.applyIf(this,b);this.buttons=[{text:"保存",scope:this,iconCls:"btn-save",handler:function(){var d=this;var f=document.getElementById("formDesignFrame");var h=f.contentWindow.xdsProject.getFormJsonCode();var e=f.contentWindow.xdsProject.getFormItems();var c=Ext.util.JSON.encode(f.contentWindow.xdsProject.getData());var g={formDefId:this.formDefId,activityName:this.activityName,extFormDef:h,formItemDef:e,extDef:c};Ext.Ajax.request({url:__ctxPath+"/flow/saveFormDef.do",params:g,method:"POST",success:function(i,j){Ext.ux.Toast.msg("操作信息","已经成功定义了该表单！");d.close();},failure:function(i,j){Ext.ux.Toast.msg("操作信息","操作出错，请联系管理员！");}});}},{text:"取消",scope:this,iconCls:"btn-cancel",handler:function(){this.close();}}];var a=new Ext.Panel({height:400,width:700,border:false,html:'<iframe id="formDesignFrame" src="'+__ctxPath+"/pages/flow/formEditor.jsp?formDefId="+this.formDefId+'" width="100%" height="100%" frameborder="0"></iframe>'});FormDesignWindow.superclass.constructor.call(this,{title:"流程表单设计",height:550,width:1000,modal:true,layout:"fit",iconCls:"btn-form-design",maximizable:true,buttonAlign:"center",items:[a]});}});