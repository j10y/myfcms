FCKXHtml._GetMainXmlString=function(){return this.MainNode.xml;};FCKXHtml._AppendAttributes=function(o,m,d,l){var j=m.attributes,c;for(var b=0;b<j.length;b++){var k=j[b];if(k.specified){var g=k.nodeName.toLowerCase();var a;if(g.StartsWith("_fck")){continue;}else{if(g=="style"){c=true;continue;}else{if(g=="class"){a=k.nodeValue.replace(FCKRegexLib.FCK_Class,"");if(a.length==0){continue;}}else{if(g.indexOf("on")==0){a=k.nodeValue;}else{if(l=="body"&&g=="contenteditable"){continue;}else{if(k.nodeValue===true){a=g;}else{try{a=m.getAttribute(g,2);}catch(i){}}}}}}}this._AppendAttribute(d,g,a||k.nodeValue);}}if(c||m.style.cssText.length>0){var f=FCKTools.ProtectFormStyles(m);var h=m.style.cssText.replace(FCKRegexLib.StyleProperties,FCKTools.ToLowerCase);FCKTools.RestoreFormStyles(m,f);this._AppendAttribute(d,"style",h);}};FCKXHtml._RemoveXHtmlJobProperties=function(b){if(!b||!b.nodeType||b.nodeType!=1){return;}if(typeof b._fckxhtmljob=="undefined"&&b.tagName!=="BODY"){return;}b.removeAttribute("_fckxhtmljob");if(b.hasChildNodes()){var c=b.childNodes;for(var a=c.length-1;a>=0;a--){var d=c[a];if(d.parentNode==b){FCKXHtml._RemoveXHtmlJobProperties(d);}}}};FCKXHtml.TagProcessors["div"]=function(a,b){if(b.align.length>0){FCKXHtml._AppendAttribute(a,"align",b.align);}a=FCKXHtml._AppendChildNodes(a,b,true);return a;};FCKXHtml.TagProcessors["font"]=function(a,b){if(a.attributes.length==0){a=FCKXHtml.XML.createDocumentFragment();}a=FCKXHtml._AppendChildNodes(a,b);return a;};FCKXHtml.TagProcessors["form"]=function(b,c){if(c.acceptCharset&&c.acceptCharset.length>0&&c.acceptCharset!="UNKNOWN"){FCKXHtml._AppendAttribute(b,"accept-charset",c.acceptCharset);}var a=c.attributes["name"];if(a&&a.value.length>0){FCKXHtml._AppendAttribute(b,"name",a.value);}b=FCKXHtml._AppendChildNodes(b,c,true);return b;};FCKXHtml.TagProcessors["input"]=function(a,b){if(b.name){FCKXHtml._AppendAttribute(a,"name",b.name);}if(b.value&&!a.attributes.getNamedItem("value")){FCKXHtml._AppendAttribute(a,"value",b.value);}if(!a.attributes.getNamedItem("type")){FCKXHtml._AppendAttribute(a,"type","text");}return a;};FCKXHtml.TagProcessors["label"]=function(a,b){if(b.htmlFor.length>0){FCKXHtml._AppendAttribute(a,"for",b.htmlFor);}a=FCKXHtml._AppendChildNodes(a,b);return a;};FCKXHtml.TagProcessors["map"]=function(b,c){if(!b.attributes.getNamedItem("name")){var a=c.name;if(a){FCKXHtml._AppendAttribute(b,"name",a);}}b=FCKXHtml._AppendChildNodes(b,c,true);return b;};FCKXHtml.TagProcessors["meta"]=function(c,d){var a=c.attributes.getNamedItem("http-equiv");if(a==null||a.value.length==0){var b=d.outerHTML.match(FCKRegexLib.MetaHttpEquiv);if(b){b=b[1];FCKXHtml._AppendAttribute(c,"http-equiv",b);}}return c;};FCKXHtml.TagProcessors["option"]=function(a,b){if(b.selected&&!a.attributes.getNamedItem("selected")){FCKXHtml._AppendAttribute(a,"selected","selected");}a=FCKXHtml._AppendChildNodes(a,b);return a;};FCKXHtml.TagProcessors["textarea"]=FCKXHtml.TagProcessors["select"]=function(a,b){if(b.name){FCKXHtml._AppendAttribute(a,"name",b.name);}a=FCKXHtml._AppendChildNodes(a,b);return a;};