var FCKDocumentProcessor=new Object();FCKDocumentProcessor._Items=new Array();FCKDocumentProcessor.AppendNew=function(){var a=new Object();this._Items.push(a);return a;};FCKDocumentProcessor.Process=function(a){var b=FCK.IsDirty();var d,c=0;while((d=this._Items[c++])){d.ProcessDocument(a);}if(!b){FCK.ResetIsDirty();}};var FCKDocumentProcessor_CreateFakeImage=function(a,b){var c=FCKTools.GetElementDocument(b).createElement("IMG");c.className=a;c.src=FCKConfig.BasePath+"images/spacer.gif";c.setAttribute("_fckfakelement","true",0);c.setAttribute("_fckrealelement",FCKTempBin.AddElement(b),0);return c;};if(FCKBrowserInfo.IsIE||FCKBrowserInfo.IsOpera){var FCKAnchorsProcessor=FCKDocumentProcessor.AppendNew();FCKAnchorsProcessor.ProcessDocument=function(a){var b=a.getElementsByTagName("A");var e;var c=b.length-1;while(c>=0&&(e=b[c--])){if(e.name.length>0){if(e.innerHTML!==""){if(FCKBrowserInfo.IsIE){e.className+=" FCK__AnchorC";}}else{var d=FCKDocumentProcessor_CreateFakeImage("FCK__Anchor",e.cloneNode(true));d.setAttribute("_fckanchor","true",0);e.parentNode.insertBefore(d,e);e.parentNode.removeChild(e);}}}};}var FCKPageBreaksProcessor=FCKDocumentProcessor.AppendNew();FCKPageBreaksProcessor.ProcessDocument=function(a){var e=a.getElementsByTagName("DIV");var b;var d=e.length-1;while(d>=0&&(b=e[d--])){if(b.style.pageBreakAfter=="always"&&b.childNodes.length==1&&b.childNodes[0].style&&b.childNodes[0].style.display=="none"){var c=FCKDocumentProcessor_CreateFakeImage("FCK__PageBreak",b.cloneNode(true));b.parentNode.insertBefore(c,b);b.parentNode.removeChild(b);}}};var FCKEmbedAndObjectProcessor=(function(){var c=[];var a=function(h){var j=h.cloneNode(true);var f;var e=f=FCKDocumentProcessor_CreateFakeImage("FCK__UnknownObject",j);FCKEmbedAndObjectProcessor.RefreshView(e,h);for(var g=0;g<c.length;g++){f=c[g](h,f)||f;}if(f!=e){FCKTempBin.RemoveElement(e.getAttribute("_fckrealelement"));}h.parentNode.replaceChild(f,h);};var d=function(f,h){var e=h.getElementsByTagName(f);for(var g=e.length-1;g>=0;g--){a(e[g]);}};var b=function(e){d("object",e);d("embed",e);};return FCKTools.Merge(FCKDocumentProcessor.AppendNew(),{ProcessDocument:function(e){if(FCKBrowserInfo.IsGecko){FCKTools.RunFunction(b,this,[e]);}else{b(e);}},RefreshView:function(f,e){if(e.getAttribute("width")>0){f.style.width=FCKTools.ConvertHtmlSizeToStyle(e.getAttribute("width"));}if(e.getAttribute("height")>0){f.style.height=FCKTools.ConvertHtmlSizeToStyle(e.getAttribute("height"));}},AddCustomHandler:function(e){c.push(e);}});})();FCK.GetRealElement=function(a){var b=FCKTempBin.Elements[a.getAttribute("_fckrealelement")];if(a.getAttribute("_fckflash")){if(a.style.width.length>0){b.width=FCKTools.ConvertStyleSizeToHtml(a.style.width);}if(a.style.height.length>0){b.height=FCKTools.ConvertStyleSizeToHtml(a.style.height);}}return b;};if(FCKBrowserInfo.IsIE){FCKDocumentProcessor.AppendNew().ProcessDocument=function(a){var d=a.getElementsByTagName("HR");var e;var b=d.length-1;while(b>=0&&(e=d[b--])){var c=a.createElement("hr");c.mergeAttributes(e,true);FCKDomTools.InsertAfterNode(e,c);e.parentNode.removeChild(e);}};}FCKDocumentProcessor.AppendNew().ProcessDocument=function(a){var e=a.getElementsByTagName("INPUT");var d;var b=e.length-1;while(b>=0&&(d=e[b--])){if(d.type=="hidden"){var c=FCKDocumentProcessor_CreateFakeImage("FCK__InputHidden",d.cloneNode(true));c.setAttribute("_fckinputhidden","true",0);d.parentNode.insertBefore(c,d);d.parentNode.removeChild(d);}}};FCKEmbedAndObjectProcessor.AddCustomHandler(function(b,a){if(!(b.nodeName.IEquals("embed")&&(b.type=="application/x-shockwave-flash"||/\.swf($|#|\?)/i.test(b.src)))){return;}a.className="FCK__Flash";a.setAttribute("_fckflash","true",0);});if(FCKBrowserInfo.IsSafari){FCKDocumentProcessor.AppendNew().ProcessDocument=function(c){var b=c.getElementsByClassName?c.getElementsByClassName("Apple-style-span"):Array.prototype.filter.call(c.getElementsByTagName("span"),function(d){return d.className=="Apple-style-span";});for(var a=b.length-1;a>=0;a--){FCKDomTools.RemoveNode(b[a],true);}};}