var FCKDialogCommand=function(d,h,c,e,a,b,g,f){this.Name=d;this.Title=h;this.Url=c;this.Width=e;this.Height=a;this.CustomValue=f;this.GetStateFunction=b;this.GetStateParam=g;this.Resizable=false;};FCKDialogCommand.prototype.Execute=function(){FCKDialog.OpenDialog("FCKDialog_"+this.Name,this.Title,this.Url,this.Width,this.Height,this.CustomValue,this.Resizable);};FCKDialogCommand.prototype.GetState=function(){if(this.GetStateFunction){return this.GetStateFunction(this.GetStateParam);}else{return FCK.EditMode==FCK_EDITMODE_WYSIWYG?FCK_TRISTATE_OFF:FCK_TRISTATE_DISABLED;}};var FCKUndefinedCommand=function(){this.Name="Undefined";};FCKUndefinedCommand.prototype.Execute=function(){alert(FCKLang.NotImplemented);};FCKUndefinedCommand.prototype.GetState=function(){return FCK_TRISTATE_OFF;};var FCKFormatBlockCommand=function(){};FCKFormatBlockCommand.prototype={Name:"FormatBlock",Execute:FCKStyleCommand.prototype.Execute,GetState:function(){return FCK.EditorDocument?FCK_TRISTATE_OFF:FCK_TRISTATE_DISABLED;}};var FCKFontNameCommand=function(){};FCKFontNameCommand.prototype={Name:"FontName",Execute:FCKStyleCommand.prototype.Execute,GetState:FCKFormatBlockCommand.prototype.GetState};var FCKFontSizeCommand=function(){};FCKFontSizeCommand.prototype={Name:"FontSize",Execute:FCKStyleCommand.prototype.Execute,GetState:FCKFormatBlockCommand.prototype.GetState};var FCKPreviewCommand=function(){this.Name="Preview";};FCKPreviewCommand.prototype.Execute=function(){FCK.Preview();};FCKPreviewCommand.prototype.GetState=function(){return FCK_TRISTATE_OFF;};var FCKSaveCommand=function(){this.Name="Save";};FCKSaveCommand.prototype.Execute=function(){var b=FCK.GetParentForm();if(typeof(b.onsubmit)=="function"){var a=b.onsubmit();if(a!=null&&a===false){return;}}if(typeof(b.submit)=="function"){b.submit();}else{b.submit.click();}};FCKSaveCommand.prototype.GetState=function(){return FCK_TRISTATE_OFF;};var FCKNewPageCommand=function(){this.Name="NewPage";};FCKNewPageCommand.prototype.Execute=function(){FCKUndo.SaveUndoStep();FCK.SetData("");FCKUndo.Typing=true;FCK.Focus();};FCKNewPageCommand.prototype.GetState=function(){return FCK_TRISTATE_OFF;};var FCKSourceCommand=function(){this.Name="Source";};FCKSourceCommand.prototype.Execute=function(){if(FCKConfig.SourcePopup){var a=FCKConfig.ScreenWidth*0.65;var b=FCKConfig.ScreenHeight*0.65;FCKDialog.OpenDialog("FCKDialog_Source",FCKLang.Source,"dialog/fck_source.html",a,b,null,true);}else{FCK.SwitchEditMode();}};FCKSourceCommand.prototype.GetState=function(){return(FCK.EditMode==FCK_EDITMODE_WYSIWYG?FCK_TRISTATE_OFF:FCK_TRISTATE_ON);};var FCKUndoCommand=function(){this.Name="Undo";};FCKUndoCommand.prototype.Execute=function(){FCKUndo.Undo();};FCKUndoCommand.prototype.GetState=function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}return(FCKUndo.CheckUndoState()?FCK_TRISTATE_OFF:FCK_TRISTATE_DISABLED);};var FCKRedoCommand=function(){this.Name="Redo";};FCKRedoCommand.prototype.Execute=function(){FCKUndo.Redo();};FCKRedoCommand.prototype.GetState=function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}return(FCKUndo.CheckRedoState()?FCK_TRISTATE_OFF:FCK_TRISTATE_DISABLED);};var FCKPageBreakCommand=function(){this.Name="PageBreak";};FCKPageBreakCommand.prototype.Execute=function(){FCKUndo.SaveUndoStep();var c=FCK.EditorDocument.createElement("DIV");c.style.pageBreakAfter="always";c.innerHTML='<span style="DISPLAY:none">&nbsp;</span>';var b=FCKDocumentProcessor_CreateFakeImage("FCK__PageBreak",c);var d=new FCKDomRange(FCK.EditorWindow);d.MoveToSelection();var a=d.SplitBlock();d.InsertNode(b);FCK.Events.FireEvent("OnSelectionChange");};FCKPageBreakCommand.prototype.GetState=function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}return 0;};var FCKUnlinkCommand=function(){this.Name="Unlink";};FCKUnlinkCommand.prototype.Execute=function(){FCKUndo.SaveUndoStep();if(FCKBrowserInfo.IsGeckoLike){var a=FCK.Selection.MoveToAncestorNode("A");if(a){FCKTools.RemoveOuterTags(a);}return;}FCK.ExecuteNamedCommand(this.Name);};FCKUnlinkCommand.prototype.GetState=function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}var b=FCK.GetNamedCommandState(this.Name);if(b==FCK_TRISTATE_OFF&&FCK.EditMode==FCK_EDITMODE_WYSIWYG){var c=FCKSelection.MoveToAncestorNode("A");var a=(c&&c.name.length>0&&c.href.length==0);if(a){b=FCK_TRISTATE_DISABLED;}}return b;};var FCKVisitLinkCommand=function(){this.Name="VisitLink";};FCKVisitLinkCommand.prototype={GetState:function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}var b=FCK.GetNamedCommandState("Unlink");if(b==FCK_TRISTATE_OFF){var a=FCKSelection.MoveToAncestorNode("A");if(!a.href){b=FCK_TRISTATE_DISABLED;}}return b;},Execute:function(){var c=FCKSelection.MoveToAncestorNode("A");var a=c.getAttribute("_fcksavedurl")||c.getAttribute("href",2);if(!/:\/\//.test(a)){var b=FCKConfig.BaseHref;var f=FCK.GetInstanceObject("parent");if(!b){b=f.document.location.href;b=b.substring(0,b.lastIndexOf("/")+1);}if(/^\//.test(a)){try{b=b.match(/^.*:\/\/+[^\/]+/)[0];}catch(d){b=f.document.location.protocol+"://"+f.parent.document.location.host;}}a=b+a;}if(!window.open(a,"_blank")){alert(FCKLang.VisitLinkBlocked);}}};var FCKSelectAllCommand=function(){this.Name="SelectAll";};FCKSelectAllCommand.prototype.Execute=function(){if(FCK.EditMode==FCK_EDITMODE_WYSIWYG){FCK.ExecuteNamedCommand("SelectAll");}else{var a=FCK.EditingArea.Textarea;if(FCKBrowserInfo.IsIE){a.createTextRange().execCommand("SelectAll");}else{a.selectionStart=0;a.selectionEnd=a.value.length;}a.focus();}};FCKSelectAllCommand.prototype.GetState=function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}return FCK_TRISTATE_OFF;};var FCKPasteCommand=function(){this.Name="Paste";};FCKPasteCommand.prototype={Execute:function(){if(FCKBrowserInfo.IsIE){FCK.Paste();}else{FCK.ExecuteNamedCommand("Paste");}},GetState:function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}return FCK.GetNamedCommandState("Paste");}};var FCKRuleCommand=function(){this.Name="Rule";};FCKRuleCommand.prototype={Execute:function(){FCKUndo.SaveUndoStep();FCK.InsertElement("hr");},GetState:function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}return FCK.GetNamedCommandState("InsertHorizontalRule");}};var FCKCutCopyCommand=function(a){this.Name=a?"Cut":"Copy";};FCKCutCopyCommand.prototype={Execute:function(){var b=false;if(FCKBrowserInfo.IsIE){var d=function(){b=true;};var a="on"+this.Name.toLowerCase();FCK.EditorDocument.body.attachEvent(a,d);FCK.ExecuteNamedCommand(this.Name);FCK.EditorDocument.body.detachEvent(a,d);}else{try{FCK.ExecuteNamedCommand(this.Name);b=true;}catch(c){}}if(!b){alert(FCKLang["PasteError"+this.Name]);}},GetState:function(){return FCK.EditMode!=FCK_EDITMODE_WYSIWYG?FCK_TRISTATE_DISABLED:FCK.GetNamedCommandState("Cut");}};var FCKAnchorDeleteCommand=function(){this.Name="AnchorDelete";};FCKAnchorDeleteCommand.prototype={Execute:function(){if(FCK.Selection.GetType()=="Control"){FCK.Selection.Delete();}else{var a=FCK.Selection.GetSelectedElement();if(a){if(a.tagName=="IMG"&&a.getAttribute("_fckanchor")){oAnchor=FCK.GetRealElement(a);}else{a=null;}}if(!a){oAnchor=FCK.Selection.MoveToAncestorNode("A");if(oAnchor){FCK.Selection.SelectNode(oAnchor);}}if(oAnchor.href.length!=0){oAnchor.removeAttribute("name");if(FCKBrowserInfo.IsIE){oAnchor.className=oAnchor.className.replace(FCKRegexLib.FCK_Class,"");}return;}if(a){a.parentNode.removeChild(a);return;}if(oAnchor.innerHTML.length==0){oAnchor.parentNode.removeChild(oAnchor);return;}FCKTools.RemoveOuterTags(oAnchor);}if(FCKBrowserInfo.IsGecko){FCK.Selection.Collapse(true);}},GetState:function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}return FCK.GetNamedCommandState("Unlink");}};var FCKDeleteDivCommand=function(){};FCKDeleteDivCommand.prototype={GetState:function(){if(FCK.EditMode!=FCK_EDITMODE_WYSIWYG){return FCK_TRISTATE_DISABLED;}var a=FCKSelection.GetParentElement();var b=new FCKElementPath(a);return b.BlockLimit&&b.BlockLimit.nodeName.IEquals("div")?FCK_TRISTATE_OFF:FCK_TRISTATE_DISABLED;},Execute:function(){FCKUndo.SaveUndoStep();var b=FCKDomTools.GetSelectedDivContainers();var a=new FCKDomRange(FCK.EditorWindow);a.MoveToSelection();var d=a.CreateBookmark();for(var c=0;c<b.length;c++){FCKDomTools.RemoveNode(b[c],true);}a.MoveToBookmark(d);a.Select();}};var FCKNbsp=function(){this.Name="Non Breaking Space";};FCKNbsp.prototype={Execute:function(){FCK.InsertHtml("&nbsp;");},GetState:function(){return(FCK.EditMode!=FCK_EDITMODE_WYSIWYG?FCK_TRISTATE_DISABLED:FCK_TRISTATE_OFF);}};