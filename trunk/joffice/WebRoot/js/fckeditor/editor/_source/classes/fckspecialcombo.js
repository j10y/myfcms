var FCKSpecialCombo=function(a,b,c,e,d){this.FieldWidth=b||100;this.PanelWidth=c||150;this.PanelMaxHeight=e||150;this.Label="&nbsp;";this.Caption=a;this.Tooltip=a;this.Style=FCK_TOOLBARITEM_ICONTEXT;this.Enabled=true;this.Items=new Object();this._Panel=new FCKPanel(d||window);this._Panel.AppendStyleSheet(FCKConfig.SkinEditorCSS);this._PanelBox=this._Panel.MainNode.appendChild(this._Panel.Document.createElement("DIV"));this._PanelBox.className="SC_Panel";this._PanelBox.style.width=this.PanelWidth+"px";this._PanelBox.innerHTML='<table cellpadding="0" cellspacing="0" width="100%" style="TABLE-LAYOUT: fixed"><tr><td nowrap></td></tr></table>';this._ItemsHolderEl=this._PanelBox.getElementsByTagName("TD")[0];if(FCK.IECleanup){FCK.IECleanup.AddItem(this,FCKSpecialCombo_Cleanup);}};function FCKSpecialCombo_ItemOnMouseOver(){this.className+=" SC_ItemOver";}function FCKSpecialCombo_ItemOnMouseOut(){this.className=this.originalClass;}function FCKSpecialCombo_ItemOnClick(b,a,c){this.className=this.originalClass;a._Panel.Hide();a.SetLabel(this.FCKItemLabel);if(typeof(a.OnSelect)=="function"){a.OnSelect(c,this);}}FCKSpecialCombo.prototype.ClearItems=function(){if(this.Items){this.Items={};}var a=this._ItemsHolderEl;while(a.firstChild){a.removeChild(a.firstChild);}};FCKSpecialCombo.prototype.AddItem=function(e,c,b,d){var a=this._ItemsHolderEl.appendChild(this._Panel.Document.createElement("DIV"));a.className=a.originalClass="SC_Item";a.innerHTML=c;a.FCKItemLabel=b||e;a.Selected=false;if(FCKBrowserInfo.IsIE){a.style.width="100%";}if(d){a.style.backgroundColor=d;}FCKTools.AddEventListenerEx(a,"mouseover",FCKSpecialCombo_ItemOnMouseOver);FCKTools.AddEventListenerEx(a,"mouseout",FCKSpecialCombo_ItemOnMouseOut);FCKTools.AddEventListenerEx(a,"click",FCKSpecialCombo_ItemOnClick,[this,e]);this.Items[e.toString().toLowerCase()]=a;return a;};FCKSpecialCombo.prototype.SelectItem=function(a){if(typeof a=="string"){a=this.Items[a.toString().toLowerCase()];}if(a){a.className=a.originalClass="SC_ItemSelected";a.Selected=true;}};FCKSpecialCombo.prototype.SelectItemByLabel=function(c,b){for(var d in this.Items){var a=this.Items[d];if(a.FCKItemLabel==c){a.className=a.originalClass="SC_ItemSelected";a.Selected=true;if(b){this.SetLabel(c);}}}};FCKSpecialCombo.prototype.DeselectAll=function(b){for(var a in this.Items){if(!this.Items[a]){continue;}this.Items[a].className=this.Items[a].originalClass="SC_Item";this.Items[a].Selected=false;}if(b){this.SetLabel("");}};FCKSpecialCombo.prototype.SetLabelById=function(b){b=b?b.toString().toLowerCase():"";var a=this.Items[b];this.SetLabel(a?a.FCKItemLabel:"");};FCKSpecialCombo.prototype.SetLabel=function(b){b=(!b||b.length==0)?"&nbsp;":b;if(b==this.Label){return;}this.Label=b;var a=this._LabelEl;if(a){a.innerHTML=b;FCKTools.DisableSelection(a);}};FCKSpecialCombo.prototype.SetEnabled=function(a){this.Enabled=a;if(this._OuterTable){this._OuterTable.className=a?"":"SC_FieldDisabled";}};FCKSpecialCombo.prototype.Create=function(c){var b=FCKTools.GetElementDocument(c);var a=this._OuterTable=c.appendChild(b.createElement("TABLE"));a.cellPadding=0;a.cellSpacing=0;a.insertRow(-1);var g;var e;switch(this.Style){case FCK_TOOLBARITEM_ONLYICON:g="TB_ButtonType_Icon";e=false;break;case FCK_TOOLBARITEM_ONLYTEXT:g="TB_ButtonType_Text";e=false;break;case FCK_TOOLBARITEM_ICONTEXT:e=true;break;}if(this.Caption&&this.Caption.length>0&&e){var f=a.rows[0].insertCell(-1);f.innerHTML=this.Caption;f.className="SC_FieldCaption";}var d=FCKTools.AppendElement(a.rows[0].insertCell(-1),"div");if(e){d.className="SC_Field";d.style.width=this.FieldWidth+"px";d.innerHTML='<table width="100%" cellpadding="0" cellspacing="0" style="TABLE-LAYOUT: fixed;"><tbody><tr><td class="SC_FieldLabel"><label>&nbsp;</label></td><td class="SC_FieldButton">&nbsp;</td></tr></tbody></table>';this._LabelEl=d.getElementsByTagName("label")[0];this._LabelEl.innerHTML=this.Label;}else{d.className="TB_Button_Off";d.innerHTML='<table title="'+this.Tooltip+'" class="'+g+'" cellspacing="0" cellpadding="0" border="0">'+"<tr>"+'<td><img class="TB_Button_Padding" src="'+FCK_SPACER_PATH+'" /></td>'+'<td class="TB_Text">'+this.Caption+"</td>"+'<td><img class="TB_Button_Padding" src="'+FCK_SPACER_PATH+'" /></td>'+'<td class="TB_ButtonArrow"><img src="'+FCKConfig.SkinPath+'images/toolbar.buttonarrow.gif" width="5" height="3"></td>'+'<td><img class="TB_Button_Padding" src="'+FCK_SPACER_PATH+'" /></td>'+"</tr>"+"</table>";}FCKTools.AddEventListenerEx(d,"mouseover",FCKSpecialCombo_OnMouseOver,this);FCKTools.AddEventListenerEx(d,"mouseout",FCKSpecialCombo_OnMouseOut,this);FCKTools.AddEventListenerEx(d,"click",FCKSpecialCombo_OnClick,this);FCKTools.DisableSelection(this._Panel.Document.body);};function FCKSpecialCombo_Cleanup(){this._LabelEl=null;this._OuterTable=null;this._ItemsHolderEl=null;this._PanelBox=null;if(this.Items){for(var a in this.Items){this.Items[a]=null;}}}function FCKSpecialCombo_OnMouseOver(b,a){if(a.Enabled){switch(a.Style){case FCK_TOOLBARITEM_ONLYICON:this.className="TB_Button_On_Over";break;case FCK_TOOLBARITEM_ONLYTEXT:this.className="TB_Button_On_Over";break;case FCK_TOOLBARITEM_ICONTEXT:this.className="SC_Field SC_FieldOver";break;}}}function FCKSpecialCombo_OnMouseOut(b,a){switch(a.Style){case FCK_TOOLBARITEM_ONLYICON:this.className="TB_Button_Off";break;case FCK_TOOLBARITEM_ONLYTEXT:this.className="TB_Button_Off";break;case FCK_TOOLBARITEM_ICONTEXT:this.className="SC_Field";break;}}function FCKSpecialCombo_OnClick(f,b){if(b.Enabled){var d=b._Panel;var c=b._PanelBox;var g=b._ItemsHolderEl;var a=b.PanelMaxHeight;if(b.OnBeforeClick){b.OnBeforeClick(b);}if(FCKBrowserInfo.IsIE){d.Preload(0,this.offsetHeight,this);}if(g.offsetHeight>a){c.style.height=a+"px";}else{c.style.height="";}d.Show(0,this.offsetHeight,this);}}